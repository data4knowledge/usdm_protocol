{% extends "shared/_layout.html" %}
{% block additional_css %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .card-body-height { overflow-y: scroll; width: 100%; }
    .table td.fit,
    .table th.fit {
      white-space: nowrap;
      width: 1%;
    }
  </style>
{% endblock %}
{% block main_content %}
  {% set links=
    [
      {'href': '/download', 'icon': 'bi bi-download', 'tooltip': 'Download the CSV file'}
    ] 
  %}
  {% set title = "Protocol to USDM " %}
  {% set text = "Utility that allows protocols in HTML form to be prepared to be loaded into USDM" %}
  {% set help = '<ol>
      <li>Download the current state of the document using the donwload icon <span><i class="text-success bi bi-download"></i></span>.</li>
    </ol>'
  %}
  {% with title=title, text=text, help=help, links=links %}
    {% include "shared/partials/header.html" %}
  {% endwith %}
  
  <div class="mt-3 row align-items-start">
    <div class="col-6">
      <div class="card border-primary" style="height:80vh">

        <!-- Card Header -->
        <div class="card-header">
          <div class="d-flex justify-content-between">
            <div class="d-flex">
                <div id="section_number_div" class="p-2"><h5>#</h5></div>
                <div id="section_title_div" class="p-2 flex-grow-1"><h5>Section</h5></div>
            </div>
            <div class="d-flex justify-right">
              <div id="usdm_section_div"></div>
              <div id="delete_section_div"></div>
              <div id="add_section_div"></div>
              <div id="edit_title_div"></div>
              <a class="link-dark" style="font-size: 20px;" data-bs-toggle="modal" data-bs-target="editHelpModal">
                <i class="ps-2 bi bi-info-circle"></i>
              </a>  
              <a class="link-dark" style="font-size: 20px;" data-bs-toggle="offcanvas" href="#section_menu_div" role="button">
                <i class="ps-2 bi bi-list"></i>
              </a>  
            </div>  
          </div>
        </div>

        <!-- Menu -->
        <div id="menu_div">
          {% with data=data %}
            {% include "home/partials/menu.html" %}
          {% endwith %}
        </div>

        <!-- Modal -->
        <div class="modal fade" id="editHelpModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">USDM Protocol Help</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <p>TBD</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Card Body -->
        <div class="card-body card-body-height">
          <div id="section_edit_div">
            <p class="lead"><i>Section details will appear here</i></p>
            <hr class="hr" />
          </div>
        </div>

      </div>
    </div>

    <div class="col-6">
      <div class="card border-primary" style="height:80vh">
        <div class="card-header">
          <div class="d-flex justify-content-between">
            <h5>Resulting Narrative Content</h5>
          </div>
        </div>        
        
        <div class="card-body card-body-height">
          <div id="section_results_div">
            <p class="lead"><i>Narrative Content Here</i></p>
            <hr class="hr" />
          </div>
        </div>
      </div>
    </div>
  </div>  

{% endblock %}